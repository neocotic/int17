/*! int17 v0.3.0 | (c) 2013 Alasdair Mercer | MIT License */
!function(){"use strict";function a(a){this.int17=a}function b(){function b(a){c.escape[a]=function(){var b,d=c.escaping;c.escaping=!0;try{b=c[a].apply(c,p.slice(arguments))}finally{d||delete c.escaping}return b}}this.messenger=new a(this),this.node=n.document;var c=this;this.escape={};for(var d=0;d<e.length;d++)b(e[d])}function c(){this._=p,this.cache={},this.version="0.3.0",this.Messenger=a,this.Internationalization=b}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},e=["all","get","map"],f=this.int17,g=function(){var a=[];for(var b in d)a.push(b);return new RegExp("["+a.join("")+"]","g")}(),h=/[\-_]/,i=/^([^\-_]+)[\-_]/,j=/\$(\w+)\$/gi,k=/\$([1-9]\d*)/gi,l=/^([^:]+):(.+)$/,m=/\s/g,n=this,o=["i18n-subs","data-i18n-subs"];!function(){for(var a=o,b=a.length,c=0;b>c;c++)a.push(a[c].replace("i18n","int17"))}();var p={};p.addAll=function(a,b){return Array.prototype.concat.apply(a,b)},p.callOrThrow=function(a,b){var c=p.slice(arguments,2);if("function"==typeof b)b.apply(a,c);else if(c[0])throw c[0]},p.escape=function(a){return a?(""+a).replace(g,function(a){return d[a]}):""},p.extend=function(a){var b,c,d,e=p.slice(arguments,1);for(b=0;b<e.length;b++)if(d=e[b])for(c in d)a[c]=d[c];return a},p.filterLanguages=function(a,b){var c,d,e=[];for(c=0;c<b.length;c++)d=b[c].match(i),d&&d[1]===a&&e.push(b[c]);return e},p.findPlaceholder=function(a,b,c){if(!c)return a[b];b=b.toLowerCase();for(var d in a)if(b===d.toLowerCase())return a[d]},p.getSubstitutions=function(a){var b,c,d=[];for(b=0;b<o.length;b++)c=a.getAttribute(o[b]),d=d.concat(c?c.split(";"):[]);return d},p.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},p.isEmpty=function(a){if(!a)return!0;if(p.isArray(a)||"string"==typeof a)return 0===a.length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},p.isObject=function(a){return a===Object(a)},p.keys=Object.keys||function(a){if(!p.isObject(a))throw new TypeError("Invalid object");var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},p.parseMessages=function(a){return a&&JSON.parse(a)},p.pick=function(a){for(var b,c=p.vargs(arguments,1),d={},e=0;e<c.length;e++)b=c[e],b in a&&(d[b]=a[b]);return d},p.slice=function(a,b,c){return Array.prototype.slice.call(a,b,c)},p.vargs=function(a,b,c){return p.addAll([],p.slice(a,b,c))};var q={"i18n-content":function(a,b){a.innerHTML=this.get(b,p.getSubstitutions(a))},"int17-content":"i18n-content","data-i18n-content":"i18n-content","data-int17-content":"i18n-content","i18n-options":function(a,b){if(b=b.replace(m,"").split(";"))for(var c,d,e=p.getSubstitutions(a),f=0;f<b.length;f++)c=document.createElement("option"),d=b[f].match(l),d?(c.innerHTML=this.get(d[1],e),c.value=d[2]):c.innerHTML=this.get(b[f],e),a.appendChild(c)},"int17-options":"i18n-options","data-i18n-options":"i18n-options","data-int17-options":"i18n-options","i18n-values":function(a,b){if(b=b.replace(m,"").split(";"))for(var c,d,e,f,g,h=p.getSubstitutions(a),i=0;i<b.length;i++)if(g=b[i].match(l))if(d=g[1],c=g[2],"."===d[0]){for(f=d.slice(1).split("."),e=a;e&&f.length>1;)e=e[f.shift()];e&&(e[f[0]]=this.get(c,h),~o.indexOf(f[0])?h=p.getSubstitutions(a):"innerHTML"===f[0]&&this.traverse(a))}else a.setAttribute(d,this.get(c,h)),~o.indexOf(d)&&(h=p.getSubstitutions(a))},"int17-values":"i18n-values","data-i18n-values":"i18n-values","data-int17-values":"i18n-values"},r=function(){var a,b=[];for(a in q)q.hasOwnProperty(a)&&("string"==typeof q[a]&&(q[a]=q[q[a]]),b.push(a));return b}(),s="["+r.join("],[")+"]";a.prototype.configure=function(a){a=a||{};var b={clean:!1,defaultLocale:"en",encoding:"UTF-8",extension:".json",fallback:!1,fileName:"messages",folders:!1,ignoreCase:!0,languages:[],locale:null,messages:{},path:"./locales",separator:"/"};return this.extendDefaults(b).extend(a,b).deriveLocale(),this.languages.sort(),this},a.prototype.deriveLocale=function(){var a=this.locale||this.extractLocale()||this.defaultLocale;return this.locale="string"==typeof a?a.split(h):a,this},a.prototype.extend=function(a,b){return p.extend(this,b,p.pick(a,p.keys(b))),this},a.prototype.extendDefaults=function(){return this},a.prototype.extractLocale=function(){var a=document.getElementsByTagName("html")[0];return a&&a.lang||navigator.language},a.prototype.getMessage=function(a){return this.messages[a]},a.prototype.getLocaleFile=function(a){var b=this.getLocaleParent(!0)+this.separator;return b+=this.folders?this.fileName:this.locale.join("_"),b+=this.extension,a?b:this.resolvePath(b)},a.prototype.getLocaleParent=function(a){var b=this.getLocaleRoot(!0);return this.folders&&(b+=this.separator+this.locale.join("_")),a?b:this.resolvePath(b)},a.prototype.getLocaleRoot=function(a){return a?this.path:this.resolvePath(this.path)},a.prototype.loadMessages=function(a,b){try{if(!p.isEmpty(this.messages))return p.callOrThrow(this,b,null,this.messages);var c=this,d=new XMLHttpRequest;d.open("GET",this.getLocaleFile(),!0),d.onreadystatechange=function(){if(4===d.readyState)if(200===d.status)try{c.messages=c.parse(d.responseText),p.callOrThrow(c,b,null,c.messages)}catch(e){p.callOrThrow(c,b,e)}else c.fallback&&a&&c.locale.length>1?(c.locale.pop(),c.loadMessages(!1,b)):p.callOrThrow(c,b,new Error(d.statusText))},d.send(null)}catch(e){p.callOrThrow(this,b,e)}},a.prototype.loadMessagesSync=function(a){if(!p.isEmpty(this.messages))return this.messages;var b=new XMLHttpRequest;if(b.open("GET",this.getLocaleFile(),!1),b.send(null),200===b.status)return this.messages=this.parse(b.responseText);if(this.fallback&&a&&this.locale.length>1)return this.locale.pop(),this.loadMessagesSync(!1);throw new Error(b.statusText)},a.prototype.parse=p.parseMessages,a.prototype.resolvePath=function(a){var b=document.createElement("a");return b.href=a,b.href},b.prototype.all=function(a){var b,c,d=[],e=p.vargs(arguments,1);if(a)for(var f=0;f<a.length;f++)b=e,c=a[f],p.isObject(c)&&(b=c.subs||b,c=c.name),d.push(this.get(c,b));return d},b.prototype.attribute=function(a,b,c){if(!this.node)return this;for(var d=p.vargs(arguments,3),e=this.node.querySelectorAll(a),f=this.get(c,d),g=0;g<e.length;g++)e[g].setAttribute(b,f);return this},b.prototype.content=function(a,b){if(!this.node)return this;for(var c=p.vargs(arguments,2),d=this.node.querySelectorAll(a),e=this.get(b,c),f=0;f<d.length;f++)d[f].innerHTML=e;return this},b.prototype.get=function(a){if(a){var b=p.vargs(arguments,1),c=this.messenger.getMessage(a);return c=c&&this.substitute(c,b),this.escaping?p.escape(c):c}},b.prototype.init=function(a,b){"function"==typeof a&&(b=a,a=null);var c=this;try{this.messenger.configure(a).loadMessages(!0,function(a){p.callOrThrow(c,b,a)})}catch(d){p.callOrThrow(this,b,d)}},b.prototype.initSync=function(a){return this.messenger.configure(a).loadMessagesSync(!0),this},b.prototype.languages=function(a,b){"function"==typeof a&&(b=a,a=null);try{p.callOrThrow(this,b,null,this.languagesSync(a))}catch(c){p.callOrThrow(this,b,c)}},b.prototype.languagesSync=function(a){var b=this.messenger.languages;return a?p.filterLanguages(a,this.languagesSync()):(b.length||b.push(this.messenger.locale.join("-")),p.slice(b))},b.prototype.locale=function(){return this.messenger.locale.join("-")},b.prototype.map=function(a){var b,c,d={},e=p.vargs(arguments,1);if(a)for(var f=0;f<a.length;f++)b=e,c=a[f],p.isObject(c)&&(b=c.subs||b,c=c.name),d[c]=this.get(c,b);return d},b.prototype.options=function(a,b){if(!this.node||!b)return this;for(var c,d,e,f,g=this.node.querySelectorAll(a),h=p.vargs(arguments,2),i=0;i<g.length;i++)for(c=0;c<b.length;c++)d=h,e=b[c],f=document.createElement("option"),p.isObject(e)&&(e.value&&(f.value=e.value),d=e.subs||d,e=e.name),f.innerHTML=this.get(e,d),g[i].appendChild(f);return this},b.prototype.property=function(a,b,c){if(!this.node)return this;for(var d,e,f,g=p.vargs(arguments,3),h=this.node.querySelectorAll(a),i=this.get(c,g),j=0;j<h.length;j++){for(d=h[j],e=d,f=b.split(".");e&&f.length>1;)e=e[f.shift()];e&&(e[f[0]]=i,"innerHTML"===f[0]&&this.traverse(d))}return this},b.prototype.substitute=function(a,b){var c=this,d=a.placeholders,e=a.message||"";return d&&(e=e.replace(j,function(a,b){var e=p.findPlaceholder(d,b,c.messenger.ignoreCase);return e=e&&e.content,"string"==typeof e?e:a})),b&&b.length&&(e=e.replace(k,function(a,c){return c-=1,"string"==typeof b[c]?b[c]:a})),e},b.prototype.traverse=function(a){if("string"==typeof a&&(a=this.node.querySelector(a)),a=a||this.node,!a)return this;for(var b,c,d,e,f=a.querySelectorAll(s),g=0;g<f.length;g++){for(c=f[g],d=0;d<r.length;d++)b=r[d],e=c.getAttribute(b),e&&(q[b].call(this,c,e),this.messenger.clean&&c.removeAttribute(b));if(this.messenger.clean)for(d=0;d<o.length;d++)c.removeAttribute(o[d])}return this},c.prototype.clearCache=function(){return this.cache={},this},c.prototype.create=function(a){return a?this.cache[a]=this.cache[a]||new b:new b},c.prototype.noConflict=function(){return n.int17=f,this},c.prototype.optimize=function(a){if(a="string"==typeof a?this.parse(a):a,!a)return a;var b,c;for(var d in a)if(delete a[d].description,c=a[d].placeholders)for(b in c)delete c[b].example;return a},c.prototype.parse=p.parseMessages;var t=n.define;"object"==typeof module&&module.exports?module.exports=require("./node").extend(new c):"function"==typeof t&&t.amd?t("int17",function(){return new c}):n.int17=new c}.call(this),function(){"use strict";var a=this.jQuery,b=this.int17,c=null;if(a){var d=a.int17,e=a.fn.int17;a.int17=function(d,e){var f=a.Deferred();return"object"==typeof d&&d&&d.int17?(c="string"==typeof d.int17?b.create(d.int17):d.int17,e&&e(null,c),f.resolve(c)):(c=b.create(),c.init(d,function(a){a?(e&&e(a),f.reject(a)):(e&&e(null,c),f.resolve(c))})),f.promise()},a.int17.noConflict=function(){return a.int17=d,this},a.fn.int17=function(){return this.each(function(){c.traverse(this)})},a.fn.int17.noConflict=function(){return a.fn.int17=e,this}}}.call(this);